language: generic
matrix:
  include:
  - os: linux
    dist: bionic
    sudo: false
    addons:
      apt:
        sources:
        - sourceline: deb [arch=amd64] https://packages.microsoft.com/ubuntu/18.04/prod
            bionic main
          key_url: https://packages.microsoft.com/keys/microsoft.asc
        packages:
        - powershell
before_install:
- sudo apt-get update
- sudo apt-get install python3.6-venv
install:
- sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10
- "./scripts/init-env.sh"
script:
- pwsh ./scripts/run.ps1
deploy:
  provider: releases
  api_key: "$GITHUB_TOKEN"
  file_glob: true
  file:
  - dist/FiraCodeScript-*.ttf
  skip_cleanup: true
  true:
    tags: true
  edge: true
env:
  global:
    secure: WpvrhFxlKQoP08Trrgqb10wMFV6fstBMqZzZfPZ8AxNIYOByrXogX+RRW/38Z3+A/kwFgjiqeoBlvKEVJvbQAo3suWSn0A+mo6IQbh9E0slXXau3Pj4psWGeut0eMetOCZe7/X/eW/wWgRW4tsBxb0jSOatJvw26u4gfEip+Nf/X2QQfJ4L7b74Jz0FriWzyfBOWd1YJWhrdoDqbqitf3BwUfyYWzEB6p23UpX7NAgvLjsuLUnZYCSUXSHog11ZHsZOvyJspxlHXWP2taCOl1P1PzBReRN0ryffEJjwyeAOECBpApE/DgbzvPi/2hr93ZRTZA29bxmr5Ds0ez+bBzXzFZ6zfLwljAvL0gPH+f7FszjwoEEcUHF6Hn4gIycUZ6lQ79D5USXz1FiPBrg3jYgfvathab7ftZA9+m2OxNQMjvH9kD5gtJDQyC5Nb6g3JBmrqopJa+38mOZn+jv9VdqHGNsq7MACggwRtXvcUMNehpjcNoQyxxBCEcE1Izqhv9rJsCWS785dFfd6Mmw++nY9o98xQv+oN86Q7EdYMGscTL/yg4lxZO9PKwT3rdF8sMiPYS1QycaVrDET8mTU2xalSMyDwW/pyVO4AsFSfbPAwjrBQk3x3J7Q5+YAvsWX/5DThmjjNzP8cRObd3e+MphseUucGPtap3lcBZ8vSWm0=