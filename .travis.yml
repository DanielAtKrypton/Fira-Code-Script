language: generic
matrix:
  include:
  - os: linux
    dist: bionic
    sudo: false
    addons:
      apt:
        sources:
        - sourceline: deb [arch=amd64] https://packages.microsoft.com/ubuntu/18.04/prod
            bionic main
          key_url: https://packages.microsoft.com/keys/microsoft.asc
        packages:
        - powershell
before_install:
- sudo apt-get update
- sudo apt-get install python3.6-venv
install:
- sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10
- ". ./scripts/init-env.sh"
- init-env
script:
- pwsh ./scripts/run.ps1
deploy:
  provider: releases
  api_key: "${GH_TOKEN}"
  file_glob: true
  file:
  - dist/FiraCodeScript-*.ttf
  skip_cleanup: true
  on:
    tags: true
  edge: true
env:
  global:
    secure: xwboYrfu5+LTYaUmU2tbgZw3CBmUGaX/RnXD1wISoz8njIYjtAyWOqg2hGyTnE6AlgNC4hDTM9NYQfRTsy9/c2hnNHdSuoN5BlI9bXVCzLgfBTzvcBcbq/DCVtH2xI72/+0iwJGtT8typXHV4H2AcgVKst0LrFEJ7ACuKasltdiT1pv8vtWY+5uainOXNkMCpbQ+/ZRbISTH2ZcTE3mXXacmHTEq0CoqZ5GnLT2c51Wkmn+i+YTEn1c4FKPUY2gmIKgaav7XkJwLPmgjpLfb5HtYZpZxbEJDHdhbFT1Pw0kYz3G54wKVejEc+4rROLGlUFH5UU0LZZ9L3rjZGHu1KO1HCof0tO62XLFUp62vbsNLHoxOpnLee0SqbZAotJVP80EfCZ08A47Wy5ITb8vkGl6J07T+OUHT5ljPLLDdBb09Ums+VljIg/JLVSYpkEAZre0+NexBSFqanuF9pK4Ylvxv7FPZfrGRZLqKR6iPCPfDQ6eHTw3o8e3gdik3QI1w4KwjRa4/m3Lo8mwEV3gxPjezu5TfopqZVWioNXziPXsy+cmbhq5Y58D3z3zJkY7mb/lLfTTEzX5F2dJMwwdjBGKBRvYST9/VPGoMq8fOtReO95RHcc76IEyXeIGmk657xNOIFTZpuZhRYlhwPu+uzMGLuh7sEbo15GWFAudkFqY=
