language: generic
matrix:
  include:
  - os: linux
    dist: bionic
    sudo: false
    addons:
      apt:
        sources:
        - sourceline: deb [arch=amd64] https://packages.microsoft.com/ubuntu/18.04/prod
            bionic main
          key_url: https://packages.microsoft.com/keys/microsoft.asc
        packages:
        - powershell
before_install:
- sudo apt-get update
- sudo apt-get install python3.6-venv
install:
- sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10
- "./scripts/init-env.sh"
script:
- pwsh ./scripts/run.ps1
deploy:
  provider: releases
  api_key: "$GITHUB_TOKEN"
  file_glob: true
  file:
  - dist/FiraCodeScript-*.ttf
  skip_cleanup: true
  on:
    tags: true
  edge: true
env:
  global:
    secure: CCr/pokHwYs3/prpF7hrA3kQDqPwr4gHcuJaHtTd1Pwz3W6MO8FqI6fb5g6nOGUea0qzVaCWcjwJ43ziN9Lb6h9wyJFX385RDuhhpvv+I/kBQG4NRly2kUhC5gCBKmgqfDrX212rX6czCHitSiJbgjQHLDJ3iNOU3zQoYZ8mie72Dj2/OvEhzLM+ni/NcQEvqNy7YlI2OzNXpWkOBo9S3bLCs3bBspjl/AmZ6GtWtKrvjKXs7CanpSt6r9qp+uRWbyg0tRAhXLajXp8QuIzAsziU7amCEJBZrytJ3avBc2gLEc5gnFzQwxic+Fu3tjmNhOlto8RrpkeM+1Rakf+ZnWYQ6DDzPjPm7Ujloc9qCDcTnRn8fcZC0ilf9o48dxEjw1hcixz0fRcTjKNrNbUvM+k4NO9Ixup/uwRjfXorPAm/wrWO1vl/3ZKQ5sfEYHT4SZbSK1mAcIDaPBImBdWqJUF1lMMFWW7iaLZoHRfYadExpIAQfPtyErw33dOrCFYIrqA//MJO1qT1qEzWqT0lP3wb3QRNl+tJ/fspsaLyBGaIw725crgNKaX50ntOM5h1wArQcXZqlYVNkvEYO/1l1befVUVDcyFp4Zq6jVpBpI/NF0FDrdDYM1GB8Qf8s4HF6QgMzn9vBFBhI+9bCh7m/O3WG2fhxqB5psPii+JDhos=
