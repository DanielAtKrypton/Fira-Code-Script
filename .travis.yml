language: generic
matrix:
  include:
  - os: linux
    dist: bionic
    sudo: false
    addons:
      apt:
        sources:
        - sourceline: deb [arch=amd64] https://packages.microsoft.com/ubuntu/18.04/prod
            bionic main
          key_url: https://packages.microsoft.com/keys/microsoft.asc
        packages:
        - powershell
before_install:
- sudo apt-get update
- sudo apt-get install python3.6-venv
install:
- sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10
- ". ./scripts/init-env.sh"
- init-env
script:
- pwsh ./scripts/run.ps1
deploy:
  provider: releases
  api_key:
    secure: Y9733kaVmgTaDk1+lvGipNuCTpXmYR3v60QNoNFj/mTrgeQmVkZkFwD9GA7MvRGdHleBs/LvECti6ZsIkReqTb/LwMaEt67eGeLfe0ZDxY+es1x/pOc09FTzaYeyrb04D7UmnPclqP51N9LYo5VALm1rta8B1RXIBHAt1HXlpuxNGtRCd+fMnDYJW+h67/8EWjotKvIcWPOIQzLTvOgfaQHotBWljCUoZNaKYOIw5+aqweQL6KdZSJaEM2ZeyzHQ8qZygJ7KpdMDKCAJJTAj3d6S4pKisizrMaFGbBfBLs1mFD9YWgWd+r3Vb03I/9Kq842VgHpSFgqJzeMiab2zXuxcdFP0RIJ3tc0qOTElbhHrh1Bi1sKDfNLKe2inaabetbR6C/ptUgcZ1e0Mjs5egU245AIACA2GOadN+BnjiUMipLCXqLeIR1ureKCHgrlHhBhqe3ZQv6fVAxDJ/m6UzI6vcFxuaBGWVM0ofnJ6LMwtUIag4G0xHr4qM3CrtPv6SmufSkiQSLEZxkwsHyaMLRCWy+Em0h28+hpGNw7hoBNbfOX/ZrpkprrnjFWc0q4CF5qwy97vc3k4czJPrRdeI8HmEJEUT8XpacbukH7VritMTjNfF+ta0fk7DWcrNajbKhzO+JpcgRqDnb25SwPmk7JhQGdH876icuzOD3kmoN4=
  file_glob: true
  file:
  - dist/FiraCodeScript-*.ttf
  skip_cleanup: true
  on:
    tags: true
  edge: true
